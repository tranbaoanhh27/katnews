<main>
    <div class="container">
        <div class="row">
            <div class="col-md-3 col-sm-6">
                {{>writer-information-nav}}
            </div>
            <div class="col-md-9 col-sm-6">
                <div class="container">
                    <img src="/images/writer-logo.jpeg" style="width: 25%;height: 25%;" class="mx-auto d-block">
                    <form action="/edit/password" method="post">
                        <div class="mb-3">
                            <label for="oldPassword" class="form-label">Mật khẩu cũ</label>
                            <input type="password" class="form-control" name="oldPassword" id="oldPassword"
                                aria-describedby="helpId" placeholder="" required />
                        </div>
                        <div class="mb-3">
                            <label for="newPassword" class="form-label">Mật khẩu mới</label>
                            <input onchange="validatePassword()" type="password" class="form-control" name="newPassword"
                                id="newPassword" aria-describedby="helpId" placeholder=""
                                pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                                title="Mật khẩu phải chứa ít nhất 1 chữ số, và 1 chữ hoa, và chữ thường, và có ít nhất 8 ký tự"
                                required />
                        </div>
                        <div class="mb-3">
                            <label for="confirmPassword" class="form-label">Xác nhật mật khẩu</label>
                            <input onfocusout="validatePassword()" type="password" class="form-control"
                                name="confirmPassword" id="confirmPassword" aria-describedby="helpId" placeholder=""
                                pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                                title="Mật khẩu phải chứa ít nhất 1 chữ số, và 1 chữ hoa, và chữ thường, và có ít nhất 8 ký tự"
                                required />
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" onclick="show()" type="checkbox" value=""
                                id="showPassworld" />
                            <label class="form-check-label" for="showPassworld"> Hiển thị mật khẩu </label>
                        </div>
                        <button type='submit' class="btn btn-primary">Xác nhận</button>
                        {{#if writerSuccessChangePassword}}
                        <div class="alert alert-success m-2">
                            {{writerSuccessChangePassword}}
                        </div>
                        {{else if writerErrorChangePassword}}
                        <div class="alert alert-danger m-2">
                            {{writerErrorChangePassword}}
                        </div>
                        {{/if}}
                    </form>
                </div>
            </div>
        </div>
    </div>
    <script>

        function show() {
            console.log("show");
            let checkbox = document.getElementById("showPassworld");
            if (checkbox.checked == false) {
                document.querySelectorAll("input[type=text]").forEach(item => item.type = 'password')
            } else {
                document.querySelectorAll("input[type=password]").forEach(item => item.type = 'text')
            }
        }
        function validatePassword() {
            console.log("hello")
            let password = document.getElementById("newPassword");
            let confirmpassword = document.getElementById("confirmPassword");
            if (password.value != confirmpassword.value) {
                confirmpassword.setCustomValidity('Password not match!');
                confirmpassword.reportValidity();
            } else {
                confirmpassword.setCustomValidity('');
            }
        }
    </script>
</main>
<footer>
    <!-- place footer here -->
</footer>
<!-- Bootstrap JavaScript Libraries -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
    integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous">
    </script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
    integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz" crossorigin="anonymous">
    </script>