<main>
    <div class="user-news-details__article-info">
        <img class="user-news-details__main-image" src="" alt="">
        <div class="user-news-details-article-info__black-cover"></div>
        <div class="user-news-details-article-info__overlay-content">
            <span><a href="#">Category</a></span>
            <h1>Title</h1>
            <h5>Introduction</h5>
            <p><a href="#">Author</a> - Published Date</p>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-9">
                <div class="user-news-details__tag-list">
                    Nhãn:
                </div>
                <div style="display: flex; justify-content: center; width: 100%;">
                    <img class="user-news-details__content-image" src="" alt="">
                </div>
                <div class="details-content">
                    Content...
                </div>
                <div class="user-news-details__comment-form-container">
                    <textarea name="comment" id="comment-input" cols="30" rows="5"
                        placeholder="Bình luận của bạn"></textarea>
                    <button class="user-news-details__comment-submit-button user-news-details__comment-submit-button--disabled">Cần đăng nhập để bình
                        luận</button>
                </div>
                <h3>5 Bình luận</h3>
                <div class="comments-list">
                    <div class="user-news-details__comment">
                        <img src="/images/default-user-icon.jpg" width="75px" height="75px" alt="">
                        <div class="user-news-details__comment-content">
                            <p><a href="#">Bảo Anh Trần</a></p>
                            <p>19/04/2023 10:40</p>
                            <p>HALA MADRID!!! Lorem ipsum dolor sit amet consectetur adipisicing elit. Unde tempore eius
                                ipsum voluptates voluptas. Dolores quia deserunt, aliquid eum optio iusto excepturi
                                beatae tempore. Minima dolores itaque mollitia tempora ipsam?</p>
                        </div>
                    </div>
                    <div class="user-news-details__comment">
                        <img src="/images/default-user-icon.jpg" width="75px" height="75px" alt="">
                        <div class="user-news-details__comment-content">
                            <p><a href="#">Bảo Anh Trần</a></p>
                            <p>19/04/2023 10:40</p>
                            <p>HALA MADRID!!! Lorem ipsum dolor sit amet consectetur adipisicing elit. Unde tempore eius
                                ipsum voluptates voluptas. Dolores quia deserunt, aliquid eum optio iusto excepturi
                                beatae tempore. Minima dolores itaque mollitia tempora ipsam?</p>
                        </div>
                    </div>
                    <div class="user-news-details__comment">
                        <img src="/images/default-user-icon.jpg" width="75px" height="75px" alt="">
                        <div class="user-news-details__comment-content">
                            <p><a href="#">Bảo Anh Trần</a></p>
                            <p>19/04/2023 10:40</p>
                            <p>HALA MADRID!!! Lorem ipsum dolor sit amet consectetur adipisicing elit. Unde tempore eius
                                ipsum voluptates voluptas. Dolores quia deserunt, aliquid eum optio iusto excepturi
                                beatae tempore. Minima dolores itaque mollitia tempora ipsam?</p>
                        </div>
                    </div>
                    <div class="user-news-details__comment">
                        <img src="/images/default-user-icon.jpg" width="75px" height="75px" alt="">
                        <div class="user-news-details__comment-content">
                            <p><a href="#">Bảo Anh Trần</a></p>
                            <p>19/04/2023 10:40</p>
                            <p>HALA MADRID!!! Lorem ipsum dolor sit amet consectetur adipisicing elit. Unde tempore eius
                                ipsum voluptates voluptas. Dolores quia deserunt, aliquid eum optio iusto excepturi
                                beatae tempore. Minima dolores itaque mollitia tempora ipsam?</p>
                        </div>
                    </div>
                    <div class="user-news-details__comment">
                        <img src="/images/default-user-icon.jpg" width="75px" height="75px" alt="">
                        <div class="user-news-details__comment-content">
                            <p><a href="#">Bảo Anh Trần</a></p>
                            <p>19/04/2023 10:40</p>
                            <p>HALA MADRID!!! Lorem ipsum dolor sit amet consectetur adipisicing elit. Unde tempore eius
                                ipsum voluptates voluptas. Dolores quia deserunt, aliquid eum optio iusto excepturi
                                beatae tempore. Minima dolores itaque mollitia tempora ipsam?</p>
                        </div>
                    </div>
                </div>
                <nav class="user-news-details__comment-pagination-container" aria-label="Page navigation">
                    <ul class="pagination">
                        <li class="page-item user-news-details__page-item disabled">
                            <a class="page-link" href="#" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li class="page-item user-news-details__page-item active" aria-current="page"><a class="page-link" href="#">1</a></li>
                        <li class="page-item user-news-details__page-item">
                            <a class="page-link" href="#" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
            <div class="col-3">
                <h3 class="mt-5">Tin liên quan</h3>
                <div id="related-news" class="carousel slide" data-bs-ride="carousel">
                    <ol class="carousel-indicators user-news-details__carousel-indicators">
                        <li data-bs-target="#related-news" data-bs-slide-to="0" class="active" aria-current="true"
                            aria-label="First slide"></li>
                        <li data-bs-target="#related-news" data-bs-slide-to="1" aria-label="Second slide"></li>
                        <li data-bs-target="#related-news" data-bs-slide-to="2" aria-label="Third slide"></li>
                        <li data-bs-target="#related-news" data-bs-slide-to="3" aria-label="Fourth slide"></li>
                        <li data-bs-target="#related-news" data-bs-slide-to="4" aria-label="Fifth slide"></li>
                    </ol>
                    <div class="carousel-inner user-news-details__carousel-inner" role="listbox">
                        <div class="carousel-item user-news-details__carousel-item active">
                            <div class="user-news-details__carousel-overlay-content">
                                <a href="#">
                                    <div class="category-badge">Category</div>
                                </a>
                                <a href="#">
                                    <p>Title</p>
                                </a>
                                <small>Published date</small>
                            </div>
                            <div class="user-news-details__carousel-blackcover"></div>
                            <img src="/assets/dummy-data/images/article3.jpg" width="100%" height="100%" class="d-block"
                                alt="First slide">
                        </div>
                        <div class="carousel-item user-news-details__carousel-item">
                            <div class="user-news-details__carousel-overlay-content">
                                <a href="#">
                                    <div class="category-badge">Category</div>
                                </a>
                                <a href="#">
                                    <p>Title</p>
                                </a>
                                <small>Published date</small>
                            </div>
                            <div class="user-news-details__carousel-blackcover"></div>
                            <img src="/assets/dummy-data/images/article3.jpg" width="100%" height="100%" class="d-block"
                                alt="First slide">
                        </div>
                        <div class="carousel-item user-news-details__carousel-item">
                            <div class="user-news-details__carousel-overlay-content">
                                <a href="#">
                                    <div class="category-badge">Category</div>
                                </a>
                                <a href="#">
                                    <p>Title</p>
                                </a>
                                <small>Published date</small>
                            </div>
                            <div class="user-news-details__carousel-blackcover"></div>
                            <img src="/assets/dummy-data/images/article3.jpg" width="100%" height="100%" class="d-block"
                                alt="First slide">
                        </div>
                        <div class="carousel-item user-news-details__carousel-item">
                            <div class="user-news-details__carousel-overlay-content">
                                <a href="#">
                                    <div class="category-badge">Category</div>
                                </a>
                                <a href="#">
                                    <p>Title</p>
                                </a>
                                <small>Published date</small>
                            </div>
                            <div class="user-news-details__carousel-blackcover"></div>
                            <img src="/assets/dummy-data/images/article3.jpg" width="100%" height="100%" class="d-block"
                                alt="First slide">
                        </div>
                        <div class="carousel-item user-news-details__carousel-item">
                            <div class="user-news-details__carousel-overlay-content">
                                <a href="#">
                                    <div class="category-badge">Category</div>
                                </a>
                                <a href="#">
                                    <p>Title</p>
                                </a>
                                <small>Published date</small>
                            </div>
                            <div class="user-news-details__carousel-blackcover"></div>
                            <img src="/assets/dummy-data/images/article3.jpg" width="100%" height="100%" class="d-block"
                                alt="First slide">
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#related-news"
                        data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#related-news"
                        data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</main>
<footer>
    <!-- place footer here -->
</footer>
<!-- Bootstrap JavaScript Libraries -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
    integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
    crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
    integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz"
    crossorigin="anonymous"></script>

<script src="https://kit.fontawesome.com/ea0c74c9ad.js" crossorigin="anonymous"></script>

<script>
    fetch("/assets/dummy-data/articles.json")
        .then(response => response.json())
        .then(json => {
            let article = { ...json[2] };

            document.title = article.title + ' | KAT News';
            document.querySelector('.user-news-details__main-image').setAttribute('src', article.imageURL);

            let articleInfoElement = document.querySelector('.user-news-details-article-info__overlay-content');
            articleInfoElement.querySelector('span').innerHTML = `<a href="/pages/news/news.html">${article.subcategory}<a/>`;
            articleInfoElement.querySelector('span').style.backgroundColor = article.categoryColor;
            articleInfoElement.querySelector('h1').innerHTML = article.title;
            articleInfoElement.querySelector('h5').innerHTML = article.intro;

            articleInfoElement.querySelector('p').innerHTML = `<a href="#">${article.authorName}</a> - ${article.publishedDate}`;
            article.tag.forEach(tag => {
                let tagSpan = document.createElement('span');
                let tagAnchor = document.createElement('a');
                tagAnchor.href = "/pages/news/news.html";
                tagAnchor.innerHTML = tag;
                tagSpan.appendChild(tagAnchor);
                document.querySelector('.user-news-details__tag-list').appendChild(tagSpan);
            });

            document.querySelector('.user-news-details__content-image').setAttribute('src', article.imageURL);
            document.querySelector('.details-content').innerHTML = article.textContent.replaceAll("\n", "<br><br>");

            document.querySelectorAll('#related-news .carousel-item').forEach(item => {
                item.querySelector('.category-badge').innerHTML = article.subcategory;
                item.querySelector('.category-badge').style.backgroundColor = article.categoryColor;
                let titleToDisplay = article.title.slice(0, 60);
                if (article.title.length > 60) titleToDisplay += '...';
                item.querySelector('p').innerHTML = titleToDisplay;
                item.querySelector('small').innerHTML = article.publishedDate;
                item.querySelector('img').setAttribute('src', article.imageURL);
            })
        });

    try {
        if (user) {
            user = JSON.parse(user);
            document.querySelector('.user-news-details__comment-submit-button').classList.remove('user-news-details__comment-submit-button--disabled');
            document.querySelector('.user-news-details__comment-submit-button').innerHTML = 'Đăng bình luận';
        }
    } catch {
        let user = localStorage.getItem('user');
        if (user) {
            user = JSON.parse(user);
            document.querySelector('.user-news-details__comment-submit-button').classList.remove('user-news-details__comment-submit-button--disabled');
            document.querySelector('.user-news-details__comment-submit-button').innerHTML = 'Đăng bình luận';
        }
    }
</script>